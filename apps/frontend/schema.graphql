type Audit {
  detail: JSON
  id: ID!
  op: String!
  operatorId: ID!
  recordId: ID!
  tableId: ID!
  timestamp: String!
}

type Base {
  id: ID!
  name: String!
  tables: [Table]!
}

type Field {
  constraint: JSON
  defaultValue: JSON
  display: Boolean
  id: ID!
  name: String!
  option: JSON
  type: FieldType!
}

enum FieldType {
  autoIncrement
  createdAt
  createdBy
  id
  number
  rating
  reference
  rollup
  select
  string
  updatedAt
  updatedBy
}

type Form {
  description: String
  fields: JSON
  id: ID!
  name: String!
  option: FormOption
  share: Share
  shareId: ID
}

type FormOption {
  backgroundColor: String
}

scalar JSON

type Query {
  base(id: ID!): Base!
  bases: [Base]
  member: WorkspaceMember
  members(q: String): [WorkspaceMember]!
  recordAudits(recordId: ID!): [Audit]
  share(id: ID!): Share
  table(id: ID!): Table
  tableByShare(shareId: ID!): Table
  tables: [Table]!
}

type RLS {
  action: RLSAction!
  allow: Boolean!
  condition: JSON
  enabled: Boolean!
  id: ID!
  name: String!
  subject: JSON
  updateCondition: JSON
}

enum RLSAction {
  create
  delete
  read
  update
}

type Share {
  enabled: Boolean!
  id: ID!
  target: ShareTarget!
}

type ShareTarget {
  id: ID!
  type: ShareTargetType!
}

enum ShareTargetType {
  form
  view
}

type Table {
  baseId: String!
  forms: [Form]
  id: ID!
  name: String!
  recordsCount: Int!
  rls: [RLS]
  schema: [Field!]!
  viewData(viewId: ID): ViewData
  views: [View!]!
}

type User {
  email: String!
  id: ID!
  username: String!
}

type View {
  aggregate: JSON
  color: JSON
  fields: JSON
  filter: JSON
  id: ID!
  isDefault: Boolean
  name: String!
  option: ViewOption
  share: Share
  shareId: ID
  sort: JSON
  type: ViewType!
}

type ViewData {
  aggregate: JSON
}

type ViewOption {
  showSystemFields: Boolean
}

enum ViewType {
  grid
}

type WorkspaceMember {
  role: WorkspaceRole!
  user: User!
}

enum WorkspaceRole {
  admin
  owner
  viewer
}
